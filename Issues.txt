1. Agents PR Meta & Orchestrator: enable connector dispatch for keepalive rounds

Labels: agent:codex, agents, agents:keepalive, devops, ci, automation, enhancement

Why
Keepalive comments authored by stranske-automation-bot are detected and the orchestrator is dispatched, but the agent connector does not start work from bot comments unless it also receives the expected repository dispatch signal. The current listen_commands route is disabled, and the keepalive sweep does not emit a connector dispatch; result is visible upsell replies from the connector and no work. This issue wires a single, reliable dispatch path from keepalive to the connector.

Scope
Implement exactly one of the two supported routes (choose one; not both):

Route A: Re-enable the listen_commands path in agents-pr-meta.yml for bot/human keepalive instructions that include the hidden sentinel.

Route B: From the keepalive sweep inside the orchestrator, immediately emit the repository_dispatch event to the connector after posting the keepalive comment (using the keepalive comment id/URL in the payload).

Non-Goals

Changing acceptance criteria or Gate logic

Altering comment text beyond the existing hidden marker protocol

Any refactor of dispatcher/worker behavior unrelated to the dispatch handoff

Tasks

Update .github/workflows/agents-pr-meta.yml

- If Route A: remove or replace if: ${{ false }} on the listen_commands job so it runs on issue_comment.created.

- Require the hidden sentinel <!-- codex-keepalive-marker -->, author allow-list (stranske-automation-bot and approved humans), and an agent:* label guard before dispatching.

- Emit repository_dispatch with event_type: codex-pr-comment-command and payload including { issue: <PR number>, agent: "codex", comment_id, comment_url, base, head } using secrets.ACTIONS_BOT_PAT.

Or update .github/workflows/agents-70-orchestrator.yml

- If Route B: in the Codex Keepalive Sweep job, after creating the keepalive comment, call repos.createDispatchEvent with the same event_type and payload. Use secrets.ACTIONS_BOT_PAT.

- Verify that only comments containing both keepalive hidden markers and an allowed author produce a dispatch; ignore edits.

Acceptance criteria

- On a PR with agents:keepalive and agent:codex, when a keepalive comment with both hidden markers is created by stranske-automation-bot, a repository_dispatch event with type codex-pr-comment-command is emitted once (no duplicates).

- The connector acknowledges and begins work on the PR (evidenced by either a new agent commit or its "work started" signal per normal behavior).

- A test PR confirms the dispatch path works for two consecutive rounds without manual intervention; no extra dispatches occur on comment edits.

Implementation notes
Files: .github/workflows/agents-pr-meta.yml, .github/workflows/agents-70-orchestrator.yml
PR title prefix: [Agents] Keepalive â†’ connector dispatch
PR kickoff comment: @{agent} Wire keepalive to connector by emitting codex-pr-comment-command dispatch on each bot-authored keepalive instruction containing the hidden markers, then validate two consecutive rounds on a sandbox PR.

2. Agents 70 Orchestrator: fix keepalive sweep assignee pre-check (skip bots; use PR number)

Labels: agent:codex, agents, agents:keepalive, devops, ci, bug

Why
The Codex Keepalive Sweep attempts to "ensure" PR assignees and fails with "Not Found" when targeting non-assignable logins (apps/bots) or when using the wrong issue number context. This short-circuits the sweep and blocks subsequent work. We need to make assignee enforcement human-only and ensure the PR number is used for the PR thread.

Scope

Treat app/bot identities as non-assignable and skip adding assignees for them.

Ensure issues.addAssignees targets the PR's issue_number (the PR number), not a source issue id.

Keep all other keepalive behavior intact.

Non-Goals

Changing labels, acceptance criteria, or Gate coupling

Any change to the keepalive comment template besides existing hidden markers

Tasks

In .github/workflows/agents-70-orchestrator.yml (keepalive sweep helper):

- Implement isAssignable(login) to return false for bot/app accounts (e.g., login.endsWith('[bot]') or connector app names).

- Filter the desired assignee set with isAssignable before calling issues.addAssignees.

- Use the PR number (context.payload.pull_request.number) as issue_number when assigning on the PR conversation.

- If the filtered list is empty, log and skip the assignment step instead of failing the sweep.

- Add light logging so the sweep summary shows the final assignee list or "skipped (no human assignees)."

Acceptance criteria

- Keepalive sweep no longer fails with "Not Found" on assignee enforcement.

- For PRs with only bot/app assignees configured, the sweep proceeds and explicitly logs that assignment was skipped.

- For PRs where human assignees are present, they are successfully added using the PR number, and the sweep continues to subsequent steps.

Implementation notes
File: .github/workflows/agents-70-orchestrator.yml
PR title prefix: [Agents] Keepalive sweep: assignee enforcement fix
PR kickoff comment: @{agent} Make assignee enforcement human-only and target the PR number; skip gracefully when no human assignees exist so the keepalive sweep can proceed.

