1) Fix: Maint 46 Post CI fails to load due to invalid env.* usage

Title: Maint 46 Post CI: fix invalid env.* scoping and restore coverage comment

Labels: agent:codex, devops, workflows, ci, health:coverage, bug, priority: high

Body:

Description

maint-46-post-ci.yml fails to load because it references env.* in expression contexts that don’t expose env. This blocks the consolidated PR summary and coverage delta.

Why

The Post CI step ties together Gate results and coverage reporting. While it’s broken, PRs lose the final summary and delta signal. The failure is reproducible in the workflow parser.

Scope
Fix the workflow and any helper script pathing so the summary and coverage delta reliably post after Gate.

Non-Goals
Rewriting Gate or changing coverage tooling.

Tasks

 Replace env.* expressions with supported sources:

 Move constants to vars.* or job‑level env: and pass via with:/step env.

 Alternatively compute constants via actions/github-script and export outputs.

 Ensure summary step reads coverage artifact and posts delta to the PR.

 Add a fast validation step (actionlint or act -n) to catch expression misuse.

 Prove fix on a throwaway PR, attach screenshot of summary.

Acceptance criteria

 Workflow loads with no “Unrecognized named-value: env” errors.

 PRs show a single consolidated CI summary with coverage delta.

 No regression in Gate artifact naming/layout.

Implementation notes

Files: .github/workflows/maint-46-post-ci.yml, .github/scripts/*post-ci*.{js,ts}
Branch: codex/issue--maint-46-post-ci-fix
PR title prefix: [Maint] Post CI fix
Touch only: .github/workflows/maint-46-post-ci.yml, relevant .github/scripts/*post-ci*
Copy/paste to PR comment (kickoff)
@{agent} Work the tasks and acceptance criteria. After each change, update the checklist and repost the current scope/tasks/criteria so keepalive can track progress.

2) Consolidate: Health 42 + 44 into a single scheduled “Health Sweep”

Title: Health Sweep: merge Actionlint (42) and Branch‑Protection verify (44)

Labels: agent:codex, devops, workflows, maintenance, health:repo, refactor, priority: medium

Body:

Description

Fold Health 42 (Actionlint) and Health 44 (branch‑protection enforcement) into one scheduled workflow with two jobs: actionlint and branch-protection-verify. Keep PR‑time Actionlint via paths-filter, but run the verification/enforce piece on schedule.

Why

Same signal, fewer workflows to reason about; easier to keep required contexts aligned with reality. 
GitHub
+1

Scope
Create health-40-sweep.yml with two jobs; retire the old scheduled runners.

Non-Goals
Changing which contexts are required.

Tasks

 New .github/workflows/health-40-sweep.yml with:

 Job 1: actionlint (PR + schedule, use paths-filter for PRs).

 Job 2: branch-protection-verify (schedule + manual dispatch).

 Decommission redundant scheduled triggers in 42/44.

 Update docs to point to the new single sweep.

Acceptance criteria

 Weekly scheduled sweep runs both checks and posts results.

 PRs still get Actionlint reviews only when workflow files change.

 No change to enforced required checks list. 
GitHub

Implementation notes

Files: .github/workflows/health-42-actionlint.yml, .github/workflows/health-44-gate-branch-protection.yml, .github/workflows/health-40-sweep.yml
Branch: codex/issue--health-sweep-consolidation
PR title prefix: [Health] Consolidate health checks
Touch only: the three workflows above, minor docs under docs/ci/
Copy/paste to PR comment (kickoff)
@{agent} Build the new sweep, remove duplicate schedules, and confirm both checks run as intended. Keep PR-time Actionlint behavior unchanged.

3) Unify intake: one “Agents 63 Issue Intake” front‑end

Title: Agents 63: unify ChatGPT Issue Sync + Codex Issue Bridge into a single intake front

Labels: agent:codex, agents, workflows, devops, enhancement, docs, priority: medium

Body:

Description

Present one “Issue Intake” entry that accepts {repo_file | raw_input | source_url} and outputs normalized, agent‑ready issues. Route internally to ChatGPT parsing or the Codex bridge without exposing two top‑level workflows. Preserve current label gating (exactly one agent:* required to trigger the bridge). 
GitHub
+1

Why

Removes naming duplication and makes Orchestrator simpler while keeping your existing parsing and bridge behavior intact. 
GitHub

Scope
New agents-63-issue-intake.yml calls existing reusables internally; deprecate the two fronts.

Non-Goals
Changing parsing logic, changing bridge agent=codex behavior.

Tasks

 Add agents-63-issue-intake.yml with inputs mirroring agents-63-chatgpt-issue-sync.yml. 
GitHub

 Internally call the ChatGPT parser or the issue bridge based on inputs.

 Keep label contract: exactly one agent:* to engage the bridge. 
GitHub

 Update orchestrator/README references.

Acceptance criteria

 Intake accepts all three input modes; issues match existing format.

 Bridge still fires when agent:codex is applied. 
GitHub

 Legacy fronts are left as thin wrappers or removed after a grace period.

Implementation notes

Files: .github/workflows/agents-63-chatgpt-issue-sync.yml, .github/workflows/agents-63-codex-issue-bridge.yml, .github/workflows/agents-63-issue-intake.yml
Branch: codex/issue--agents-63-intake-unify
PR title prefix: [Agents] Unify issue intake
Touch only: the three workflows, docs under docs/ci/AGENTS_POLICY.md
Copy/paste to PR comment (kickoff)
@{agent} Implement the intake front, route to existing reusables, and ensure label-based triggering remains identical to current behavior.

4) Merge PR meta: Listener + Body Writer into one workflow

Title: Agents PR Meta: merge comment command listener (64) and PR body writer (74)

Labels: agent:codex, workflows, devops, refactor, guardrail, priority: medium

Body:

Description

Combine the PR comment command listener and the PR body writer into one workflow with a shared concurrency group. Keep marker‑based PR body updates to avoid clashes with human text.

Why

Eliminates cross‑workflow races and centralizes PR decoration logic.

Scope
One workflow handling commands and body updates in separate jobs.

Non-Goals
Changing command syntax or markers.

Tasks

 Create agents-pr-meta.yml with jobs:

 listen_commands on issue_comment events.

 update_body to maintain a single marker block.

 Use a common concurrency group keyed by PR number.

 Remove/retire the old two workflows.

Acceptance criteria

 Commands and body updates never run concurrently for the same PR.

 Marker updates do not overwrite unrelated PR text.

Implementation notes

Files: .github/workflows/agents-64-pr-comment-command-listener.yml, .github/workflows/agents-74-pr-body-writer.yml, .github/workflows/agents-pr-meta.yml
Branch: codex/issue--merge-pr-meta
PR title prefix: [Agents] Merge PR meta workflows
Touch only: the three workflows above
Copy/paste to PR comment (kickoff)
@{agent} Build the combined workflow and replace the two existing ones. Validate concurrency and no body thrash on a test PR.

5) Autofix: auto‑label style‑only failures in Gate and widen loop scope

Title: Gate + Autofix: auto‑label clean failures and allow loop on any PR with autofix:clean

Labels: agent:codex, workflows, ci, devops, autofix, autofix:clean, enhancement, priority: high

Body:

Description

When Gate detects failures limited to formatting/imports/other cosmetic issues, apply autofix:clean to the PR. Update the Autofix Loop to run whenever autofix:clean is present, not only on agent:* PRs, while keeping the ALLOWED_GLOBS restriction.

Why

This recovers time on human PRs without sacrificing safety; the loop already has tight edit scopes. 
GitHub
+1

Scope
Small change in Gate’s summary job plus label logic in Autofix.

Non-Goals
Changing allowed file globs.

Tasks

 In Gate summary, detect format/import‑only failures and add autofix:clean. 
GitHub

 In autofix.yml, drop the agent:* co‑label requirement; trigger solely on autofix/autofix:clean. 
GitHub

 Keep ALLOWED_GLOBS as *.py, *.pyi; add explicit guard against non‑Python changes.

Acceptance criteria

 For cosmetic failures, PR gains autofix:clean automatically.

 Autofix Loop runs and pushes minimal import/format fixes.

 No edits outside allowed globs.

Implementation notes

Files: .github/workflows/pr-00-gate.yml, .github/workflows/autofix.yml, .github/scripts/*gate*
Branch: codex/issue--gate-autolabel-autofix
PR title prefix: [CI] Gate-driven autofix label & loop
Touch only: the two workflows above and Gate summary script
Copy/paste to PR comment (kickoff)
@{agent} Implement label auto-add and relax the loop’s label gate while preserving allowed file globs.

6) Guardrail: centralize required check names to avoid brittle branch‑protection drift

Title: Branch protection: centralize required contexts and sync with enforcer

Labels: agent:codex, workflows, devops, guardrail, health:repo, maintenance, priority: medium

Body:

Description

Put required check names (e.g., “Gate / gate”, “Health 45 Agents Guard / Enforce agents workflow protections”) in a single config that both the enforcer and Gate summary read, so renames don’t silently break protection. 
GitHub

Why

Names drift; protection silently weakens. One source of truth prevents foot‑guns.

Scope
New config file and minor updates to the enforcer and Gate summary job to read it.

Non-Goals
Adding or removing required checks.

Tasks

 Add .github/config/required-contexts.json with canonical list.

 Update branch‑protection enforcer to consume the file. 
GitHub

 Update Gate summary to reference the same list when reporting “required checks.”

 Document the rule and the update process in docs/ci/.

Acceptance criteria

 A single JSON file defines required contexts.

 Enforcer and Gate summary read the same list.

 Renaming a job requires updating one file, not code.

Implementation notes

Files: .github/config/required-contexts.json, .github/workflows/health-44-gate-branch-protection.yml, .github/workflows/pr-00-gate.yml, .github/scripts/*branch*
Branch: codex/issue--required-contexts-source-of-truth
PR title prefix: [Guardrail] Centralize required contexts
Touch only: those files and minimal docs
Copy/paste to PR comment (kickoff)
@{agent} Add the config, wire it into enforcer + Gate summary, and document the process for updating required contexts.
