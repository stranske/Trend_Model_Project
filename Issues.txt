1) Agents: fix Orchestrator call graph and verify‑assignment mismatch

Labels: agents, devops, ci, bug

Background / Why
The “Agents 70 Orchestrator” reusable workflow referenced a non-existent verify workflow, causing the orchestration to fail when that path was invoked. The verify workflow on disk is agents-64-verify-agent-assignment.yml and currently has zero runs, which tracks with the mismatch. 
GitHub
+1

Acceptance criteria

agents-70-orchestrator.yml successfully runs on schedule and workflow_dispatch without “workflow was not found” errors.

The verify‑assignment step runs via workflow_call and passes, visible in the Orchestrator job graph.

A manual Orchestrator dispatch that sets enable_verify_issue: true with a real issue number completes green and posts proof in the run summary.

Task list

Update ./.github/workflows/reusable-70-agents.yml to reference ./.github/workflows/agents-64-verify-agent-assignment.yml so the verify step can execute.

Ensure agents-64-verify-agent-assignment.yml exposes on: workflow_call with the inputs expected by the reusable.

Run a manual Orchestrator dispatch using options_json to exercise the verify path; attach the run link in a comment.

Delete any stale references to the mismatched verify workflow path in repo docs or comments.

Implementation notes

The orchestrator run that fails shows the precise missing path and is a quick confirm after the change. 
GitHub

2) Retire legacy agent-watchdog.yml in favor of Orchestrator’s watchdog

Labels: agents, devops, enhancement, ci

Background / Why
The legacy “Agent watchdog” workflow is still actively firing, and the Orchestrator already exposes a watchdog path (enable_watchdog defaults to true). Keeping both increases noise and makes diagnosis harder. 
GitHub
+1

Acceptance criteria

agent-watchdog.yml is disabled (commented on: or archived) and no longer triggers.

Orchestrator watchdog path is the single source of truth; a scheduled Orchestrator run shows watchdog checks executing.

ARCHIVE_WORKFLOWS.md updated to note deprecation and replacement.

Task list

Disable triggers in agent-watchdog.yml or move it to Old/ and mark archived.

Confirm agents-70-orchestrator.yml passes enable_watchdog: true into the reusable and logs watchdog steps.

Update ARCHIVE_WORKFLOWS.md with the retirement note and new entry point.

Post one link to a scheduled Orchestrator run that shows watchdog steps.

Implementation notes

Orchestrator input enable_watchdog and defaults are visible in the workflow file. 
GitHub

3) Repair repository health self‑check and rename to health-40-repo-selfcheck.yml

Labels: ci, devops, bug, config, docs

Background / Why
The current repo-health-self-check.yml fails because it requests unsupported permissions (metadata, administration). Fix the permissions, add graceful fallbacks for API calls that truly need elevated scopes, and align the file name with the naming scheme below. 
GitHub
+1

Acceptance criteria

File renamed to .github/workflows/health-40-repo-selfcheck.yml.

Workflow passes on workflow_dispatch and scheduled runs without permission errors.

If privileged endpoints are needed, the job uses SERVICE_BOT_PAT when present; if missing, the step no‑ops with a clear note in the step summary, not a red X.

Step summary lists the checks performed and their result.

Task list

Replace permissions: with a supported minimal set:

permissions:
  contents: read
  issues: write
  pull-requests: read


and remove metadata and administration.

Rename the file to health-40-repo-selfcheck.yml; update any references.

In the self‑check script, gate privileged calls on env.SERVICE_BOT_PAT != ''. If absent, log a yellow “skipped privileged checks” line, keep the run green.

Add a short markdown summary ($GITHUB_STEP_SUMMARY) listing each check and outcome.

Trigger a manual run and attach the link in a comment.

Implementation notes

The invalid keys are explicitly called out in the run diagnostics. 
GitHub

4) Adopt workflow numbering/naming/filing convention and rename the stragglers

Labels: devops, ci, config, docs, enhancement

Background / Why
Current workflow names are mixed: agents-43-..., agents-64-..., repo-health-self-check.yml, multiple selftest- and maint- variants. A consistent scheme improves scanability and cross‑references. The Actions list shows the outliers. 
GitHub

Convention

00–19: PR gate and essential checks

Example: pr-00-gate.yml (present and active). 
GitHub

10–29: Reusable CI building blocks

Example: reusable-10-ci-python.yml, reusable-12-ci-docker.yml. 
GitHub

40–49: Repo maintenance and health

Use health-4X-* or maint-4X-*.

60–79: Agents and issue automation

agents-6X-* for agent bridge, assignment verification, orchestrator.

80–89: Self‑tests and experiments

selftest-8X-*, on: workflow_dispatch only.

Acceptance criteria

All workflows and reusables in .github/workflows/ conform to the scheme above.

All inbound references (uses: ./.github/workflows/...) updated.

Actions list shows only the new names; old files removed or archived.

Task list

Rename:

repo-health-self-check.yml → health-40-repo-selfcheck.yml (also in Issue 3).

agents-43-codex-issue-bridge.yml → agents-63-codex-issue-bridge.yml.

Keep agents-64-verify-agent-assignment.yml as‑is and update Orchestrator to call it (Issue 1).

maint-43-selftest-pr-comment.yml → selftest-83-pr-comment.yml with manual trigger only.

maint-44-selftest-reusable-ci.yml → selftest-84-reusable-ci.yml manual only.

maint-48-selftest-reusable-ci.yml → selftest-88-reusable-ci.yml manual only.

pr-20-selftest-pr-comment.yml → selftest-82-pr-comment.yml manual only.

selftest-pr-comment.yml → selftest-80-pr-comment.yml manual only.

selftest-reusable-ci.yml → selftest-81-reusable-ci.yml manual only.

Update all uses: references and any docs that cite old names.

Post one screenshot or link to the Actions list showing only the new names.

Implementation notes

The Gate file name and structure are already aligned and serve as a good example. 
GitHub

5) Restrict or remove self‑test workflows to “manual only”

Labels: ci, devops, docs

Background / Why
Several self‑test workflows are registered and visible in Actions. These should be opt‑in only to avoid noise and false signals during normal development. 
GitHub

Acceptance criteria

All selftest-8X-* workflows have only on: workflow_dispatch.

No self‑test runs are triggered by push, pull_request, or schedules.

CONTRIBUTING.md includes a short section on how and when to run self‑tests.

Task list

For each selftest-8X-* file, remove non‑manual triggers and keep workflow_dispatch with a small input, e.g., reason.

Add a two‑paragraph section to CONTRIBUTING.md describing self‑tests and how to interpret their output.

Manually trigger one self‑test and paste the run link in a comment.

6) Enforce PR branch protection using the Gate check

Labels: devops, ci, config

Background / Why
Gate is running and aggregates job results into a single required decision point for PRs. Enforcing it as a required check keeps the signal unambiguous for reviewers. The Gate workflow exists and is healthy. 
GitHub
+1

Acceptance criteria

Default branch has a protection rule that requires the “Gate” check to pass before merge.

Optional: keep a single legacy “CI” alias if you prefer continuity, but Gate remains required.

A newly opened PR shows the required “Gate” status in the Checks UI.

Task list

In repository settings, add or update the branch protection rule for the default branch to require the Gate check.

If you keep a “CI” alias, configure a status check mapping or preserve an informational check name in your post‑CI workflow.

Open a test PR from a non‑default branch and verify Gate is required.

7) Align docs with the final CI/automation topology

Labels: docs, devops

Background / Why
Docs like ARCHIVE_WORKFLOWS.md, CONTRIBUTING.md, and Agents.md exist and should reflect the final naming and the Orchestrator‑centric model. This reduces confusion for future readers and Issue automation. 
GitHub

Acceptance criteria

Agents.md shows the current agent entry points, including the Orchestrator and verify‑assignment, with the correct file names and triggers.

ARCHIVE_WORKFLOWS.md lists retired workflows (e.g., legacy watchdog) and their replacements.

CONTRIBUTING.md references Gate and the PR flow correctly.

Task list

Update Agents.md sections for “Orchestrator,” “Codex Issue Bridge,” and “Verify Agent Assignment” with new names and triggers.

Add an “Archived” section to ARCHIVE_WORKFLOWS.md for legacy watchdog and any removed self‑tests.

Make sure CONTRIBUTING.md mentions:

Gate as the required PR check.

How to run workflow_dispatch for maintenance and agents.

Where to find the health self‑check output in run summaries.

8) Post‑merge hygiene: keep the “Maint 46 Post CI” aggregator and failure tracker tidy

Labels: ci, devops, enhancement

Background / Why
“Maint 46 Post CI” and the “Check Failure Tracker” are both running and provide useful aggregation. Keep them, but confirm they’re deduplicated and reference the new names so your PR summaries and failure triage stay readable. 
GitHub

Acceptance criteria

Maint 46 Post CI emits a single, deduplicated PR summary comment with correct job names and links.

Failure Tracker opens/updates one issue per failing category instead of spamming duplicates after the rename.

Names in summaries reflect the new workflow names.

Task list

Review post‑CI comment template to ensure it lists the renamed jobs.

Validate the failure tracker queries by opening a test PR that intentionally fails one job; confirm update vs duplicate.

Attach links to one successful Maint 46 Post CI run and one Failure Tracker update.
