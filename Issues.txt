1. Lock down Agents 63: protect the files from deletion or unsafe edits

Labels: agents, agent:codex, workflows, devops, config, priority: high, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md + new docs/ci/AGENTS_POLICY.md (created in Issue 5)

Why
Agents 63 ChatGPT Issue Sync and Agents 63 Codex Issue Bridge are core automation. They must not vanish or get “optimized” into oblivion during casual refactors. These two are now the contract for agent workflows. 
GitHub
+1

Scope
Add multi-layer protections that make removal practically impossible without intent:

Tasks

 Add CODEOWNERS rules:

# Critical agent workflows require owner approval
.github/workflows/agents-63-chatgpt-issue-sync.yml  @stranske
.github/workflows/agents-63-codex-issue-bridge.yml   @stranske
.github/workflows/agents-70-orchestrator.yml         @stranske


And enable “Require review from Code Owners” in branch protection for the default branch. Reference these workflow names and the orchestrator. 
GitHub
+2
GitHub
+2

 Configure a Repository ruleset to prevent deletions/renames of:

.github/workflows/agents-63-chatgpt-issue-sync.yml

.github/workflows/agents-63-codex-issue-bridge.yml

.github/workflows/agents-70-orchestrator.yml
Require maintainers to override in emergencies. Document steps in AGENTS_POLICY.md.

 Update docs/ci/WORKFLOW_SYSTEM.md to call out these immutable files explicitly and link to AGENTS_POLICY.md. 
GitHub

Acceptance criteria

Attempts to delete or rename any of the three files cannot be merged without explicit maintainer override.

CODEOWNERS review is enforced on PRs that modify these files.

Policy is documented and linked from the main workflow doc.

2. Add “Health 45 Agents Guard” PR gate (block deletions, unapproved edits)

Labels: workflows, ci, devops, agents, priority: high, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md + docs/ci/AGENTS_POLICY.md

Why
You need a check the attacker can’t dodge. A pull_request_target guard runs from the base branch, so even if a fork tries to delete the files, the guard still executes and fails the PR. No secrets used.

Tasks

 Create .github/workflows/health-45-agents-guard.yml:

Trigger: pull_request_target on any change under .github/workflows/agents-*.yml

Permissions: contents: read, pull-requests: write only

Step 1: list changed files via the GitHub API

Step 2: hard fail if:

Either of the Agents 63 files are deleted/renamed

The Orchestrator is deleted/renamed

Step 3: allow edits only if the PR has label agents:allow-change and at least one CODEOWNER approval (see Issue 1)

Post a friendly but firm PR comment explaining the failure and how to proceed

 Add this status check to your default branch’s required checks alongside Gate/other required signals

Acceptance criteria

A PR attempting to delete or rename the protected files immediately fails with a clear comment.

A PR that modifies the files without agents:allow-change fails.

A PR that modifies them with the label still requires CODEOWNER approval.

3. Retire legacy Agents 61/62 Consumers and scrub references

Labels: agents, workflows, devops, docs, documentation, priority: high, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md + docs/ci/AGENTS_POLICY.md

Why
The 61/62 consumer variants are obsolete and confusing now that Agents 63 and the Orchestrator handle issue workflows. They are still visible in the Actions catalogue. Remove them and their mentions. 
GitHub

Tasks

 Remove .github/workflows/agents-61-consumer-compat.yml and .github/workflows/agents-62-consumer.yml

 Grep the repo for “Agents 61” and “Agents 62” and delete/update references

 Update WORKFLOW_SYSTEM.md and AGENTS_POLICY.md to state that 61/62 are retired, and that 63 + Orchestrator is the supported topology. 
GitHub
+1

Acceptance criteria

No 61/62 workflows in the tree

No docs or comments refer to 61/62

Actions tab shows only 63 workflows and the Orchestrator in the agents family

4. Branch protection: require Gate + Agents Guard

Labels: workflows, ci, devops, config, priority: high, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md

Why
Gate should remain the one required PR workflow, and the new Health 45 Agents Guard should be required to enforce immutability. You already have a “Health 44 Gate Branch Protection” helper; align the policy and automate periodic verification. 
GitHub

Tasks

 Default branch: mark “Gate” and “Health 45 Agents Guard” as required status checks

 Update the “Health 44 Gate Branch Protection” workflow (or doc) to verify these required checks are present and correct; fail if drift occurs. 
GitHub

 Document the required checks in WORKFLOW_SYSTEM.md so contributors know what must be green. 
GitHub

Acceptance criteria

Branch protection shows Gate + Agents Guard required

Health 44 verification passes and fails intentionally if a required check is removed

5. Add docs/ci/AGENTS_POLICY.md and link it everywhere that matters

Labels: docs, documentation, agents, workflows, priority: medium, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md (hub)

Why
One short policy page beats a thousand scattered comments.

Tasks

 Create docs/ci/AGENTS_POLICY.md with:

Scope and purpose of Agents 63 pair and the Orchestrator

“Unremovable” policy and the layers that enforce it (CODEOWNERS, Ruleset, Agents Guard)

Allowlisted reasons to change these files and the agents:allow-change label process

A short troubleshooting section

 Link it from docs/ci/WORKFLOW_SYSTEM.md and from the two Agents 63 workflow headers as a comment. 
GitHub

Acceptance criteria

New doc exists, is linked from the hub and workflow headers

Contributors have a single place to understand the invariants

6. PR 02 Autofix: finalize gating, concurrency, and fork safety

Labels: workflows, ci, autofix, devops, priority: medium, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md

Why
Autofix is useful, until it tries to act on every PR at once or clobbers artifacts from forks. Tighten it so it behaves like a well-trained dog. PR 02 exists and is active. 
GitHub

Tasks

 Add concurrency: to PR 02 so only one Autofix job runs per PR head ref

 Respect autofix label: run only when present; otherwise no‑op

 Ensure fork-safe behavior: avoid uploading artifacts that expose secrets, scope token perms to the minimum

 Post a single PR comment per run; update it on retries instead of spamming

Acceptance criteria

Multiple pushes to the same PR do not produce overlapping Autofix runs

Autofix only runs with label present

No duplicate bot comments

7. Consolidate self-tests into a single parameterized runner; remove wrappers

Labels: workflows, ci, testing, workflows, refactor, priority: medium, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md

Why
You still have multiple selftest wrappers on Actions. Combine them to cut maintenance and matrix time. 
GitHub

Tasks

 Add one selftest-runner.yml with an input matrix (comment-only PRs, reusable CI checks, etc.)

 Delete maint-43-selftest-pr-comment.yml, maint-44-selftest-reusable-ci.yml, maint-48-selftest-reusable-ci.yml, selftest-pr-comment.yml, selftest-reusable-ci.yml after parity is proven

 Update WORKFLOW_SYSTEM.md to point to the consolidated runner

Acceptance criteria

Only one selftest workflow remains in .github/workflows

All previous use cases are covered by matrix

Actions list no longer shows duplicate selftest workflows

8. Gate owns docs-only fast path; remove PR 14 Docs Only

Labels: workflows, ci, docs, documentation, priority: medium, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md

Why
Keep the required status consistent. Gate should detect docs‑only diffs and bail fast; the standalone PR 14 is redundant and can confuse contributors. Historical runs show PR 14 existed; align the tree with current policy. 
GitHub

Tasks

 Delete .github/workflows/pr-14-docs-only.yml if still present

 Ensure Gate posts a single docs‑only notice and skips heavy jobs

 Document the behavior in WORKFLOW_SYSTEM.md

Acceptance criteria

No PR 14 workflow file in the repo

Gate visibly fast‑passes docs‑only PRs and leaves the required check green

9. Repo health self-check: fix permissions and make results actionable

Labels: workflows, ci, devops, docs, priority: medium, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md

Why
The health check is there; make it reliable and useful instead of a “red box once a week.” Recent runs show failures; this often comes down to permissions or brittle assertions. 
GitHub

Tasks

 Use minimal permissions: likely contents: read, issues: write only if it comments, remove unsupported scopes

 Downgrade brittle checks to warnings with a JSON summary artifact

 Add a “How to fix” checklist in the workflow’s PR comment

 Document what “green” means in WORKFLOW_SYSTEM.md

Acceptance criteria

Health check passes when the repo is healthy and fails only on real problems

The failure comment includes a clear fix list

10. Document the final topology clearly in one place

Labels: docs, documentation, workflows, priority: low, risk:low, status: ready
Design doc: docs/ci/WORKFLOW_SYSTEM.md

Why
This is the page contributors will actually read before breaking things. Keep it tight and visual.

Tasks

 Update docs/ci/WORKFLOW_SYSTEM.md with:

The four buckets: PR checks (Gate, PR 02 Autofix), maintenance (Maint 46 Post CI, Health checks), issue/agents (Agents 63 pair + Orchestrator), and error checking/linting/testing topology

One table: workflow → trigger → purpose → required? → links to artifacts/logs

A “How to change a workflow safely” section pointing to AGENTS_POLICY.md

 Cross-link from README.md and CONTRIBUTING.md to this doc

Acceptance criteria

The doc shows exactly what runs where and why

New contributors can find and follow the rules without asking on a call
