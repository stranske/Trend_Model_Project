1. Health guards: broaden branch filters so protections apply if the default branch changes
Labels: devops, guardrail, config, documentation, workflows

Why
Some guard workflows target a specific branch. If the default branch changes, protections silently stop.

Scope
Include both `phase-2-dev` and `main` in `on:` filters and add a short docs note.

Non‑Goals
Changing job logic.

Tasks
- Update branch lists in Health/Guard workflows to include both branches.
- Document the requirement in `docs/ci/BRANCHING.md`.

Acceptance criteria
- Guards run on both branches.
- Docs explain keeping triggers aligned with the default branch.

Implementation notes
Files: Health 43 CI Signature Guard, Health 44 Gate Branch Protection.

PR title prefix: [Health] Branch filter hardening
PR kickoff comment: @{agent} Add `main` alongside `phase-2-dev` in guard workflow triggers and document the default-branch expectation.

2. Actions security: pin third‑party actions by commit SHA across Gate/Health/Agents
Labels: devops, guardrail, security, enhancement, workflows

Why
Using floating major tags (`@v3`, `@v4`) risks supply‑chain surprises. Pin SHAs for third-party actions.

Scope
Replace tags with SHAs and add a short “how to bump” doc.

Non‑Goals
Changing workflow behavior.

Tasks
- Enumerate non‑`actions/*` uses and pin by SHA (and optionally pin `actions/*` for full determinism).
- Write `docs/ci/ACTIONS_PINNING.md`.
- Re‑run Gate and Health on a dummy PR to confirm behavior.

Acceptance criteria
- All non‑`actions/*` uses are pinned by SHA.
- Docs explain bumping.

Implementation notes
Files: `.github/workflows/*.yml`.

PR title prefix: [Security] Pin actions
PR kickoff comment: @{agent} Pin third‑party actions by SHA across Gate/Health/Agents and add a short doc on updating pins.

3. Post‑CI consolidation: restrict or remove “Maint 46 Post CI” and centralize summary/status in Gate
Labels: ci, devops, maintenance, workflows, guardrail, documentation

Why
Maint 46 re‑discovers Gate runs, re‑downloads artifacts, re‑renders a summary, and re‑sets commit status. That duplicates Gate’s own `summary` job and risks drift.

Scope
Either delete Maint 46 or make it recovery‑only: run only when Gate’s `summary` didn’t complete. Remove status re‑post unless recovering. Document the policy.

Non‑Goals
Changing Gate’s coverage computation or PR comment structure.

Tasks
- Add a guard step in Maint 46 to check for Gate `summary` completion; exit early if present.
- Remove duplicate commit‑status propagation unless in recovery mode.
- Update CI docs to make Gate the source of truth.

Acceptance criteria
- In the happy path, only Gate posts summary and status.
- Maint 46 runs only when Gate failed before summarizing.

Implementation notes
Files: `.github/workflows/maint-46-post-ci.yml`, `.github/workflows/pr-00-gate.yml`.

PR title prefix: [CI] Post‑CI consolidation
PR kickoff comment: @{agent} Make Gate the single summary/status source and restrict Maint 46 to recovery-only or retire it.

4. Agents 71/72/73: make them reusable-only; remove any direct triggers; invoke via Orchestrator
Labels: agents, devops, workflows, refactor, guardrail, maintenance

Why
The belt dispatcher/worker/conveyor should not be public entrypoints. Reusable-only reduces accidental runs and keeps Orchestrator as the single driver.

Scope
Ensure these YAMLs are `workflow_call` only. Drop `workflow_dispatch` or other public triggers if present.

Non‑Goals
Changing belt logic.

Tasks
- Remove direct triggers from Agents 71/72/73.
- Keep `workflow_call` with typed inputs.
- Verify Orchestrator fan‑out still functions.

Acceptance criteria
- Belt workflows are no longer runnable from the Actions UI.
- Orchestrator `uses: ./.github/workflows/agents-7x-...` still works.

Implementation notes
Files: `.github/workflows/agents-71*-dispatcher.yml`, `agents-72*-worker.yml`, `agents-73*-conveyor.yml`.

PR title prefix: [Agents] Belt = reusable-only
PR kickoff comment: @{agent} Drop public triggers for belt workflows; keep them workflow_call-only and validate Orchestrator fan-out.

5. Clean up retired agent workflows from `.github/workflows` to reduce noise
Labels: agents, maintenance, workflows, documentation

Why
“Retired” agent workflows still show up in Actions, increasing clutter and confusion.

Scope
Remove them from `.github/workflows/`; if you want a history, move them to `/retired/` outside Actions.

Non‑Goals
Changing active agent workflows.

Tasks
- Remove “Agents PR body writer (retired)” and “Agents PR comment commands (retired)” from `.github/workflows/`.
- Add a README note in `/retired/` to explain where they went.

Acceptance criteria
- Retired workflows no longer appear in Actions.
- Docs mention where to find archived versions.

Implementation notes
Files: the two “retired” agent workflow YAMLs under `.github/workflows/`.

PR title prefix: [Maintenance] Remove retired agent workflows
PR kickoff comment: @{agent} Remove retired agent workflows from `.github/workflows` and archive them under `/retired/` with a short note.
