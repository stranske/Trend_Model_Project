1) Refactor root scripts to call package APIs

Suggested labels: refactor, pipeline, backend, docs, risk:low, priority: medium, agent:copilot 
GitHub

Why
Root scripts (manager_attribution_analysis.py, portfolio_analysis_report.py, demo_*) should not duplicate logic. 
GitHub

Scope

Move shared logic into src/trend/….

Keep scripts as thin CLI wrappers.

Acceptance criteria

No business logic lives only in scripts/ or repo root; scripts import package functions.

2) Logs and data hygiene

Suggested labels: data, devops, docs, config, risk:low, priority: medium, agent:copilot 
GitHub

Why
tmp_logs/ is tracked and CSVs in root encourage hardcoded paths. 
GitHub

Scope

Add/confirm .gitignore ignores tmp_logs/.

Move example datasets into data/.

data/loader.py that supports csv/parquet and an “example dataset” alias.

Acceptance criteria

Logs aren’t committed; all code loads data via the loader; Docker mounts /data.

3) Built‑in walk‑forward evaluation

Suggested labels: pipeline, metrics, enhancement, testing, risk:low, priority: medium, agent:copilot 
GitHub

Why
Time‑aware cross‑validation is the sanity check you’ll actually use.

Scope

walk_forward(returns, params, windows=[…]) -> DataFrame returning out‑of‑sample stats by window.

Plot stability bands; export JSON for the report.

Acceptance criteria

A single CLI call generates a walk‑forward table and chart; tests cover a tiny deterministic dataset.

4) Turnover & TC modeling as first‑class params

Suggested labels: weights, pipeline, enhancement, risk:low, priority: medium, agent:copilot 
GitHub

Why
You already demo turnover caps and robust weighting; expose them in the main pipeline (demo_turnover_cap.py, demo_robust_weighting.py). 
GitHub

Scope

Params: turnover_cap_bps, tc_bps, and robust_weighting dict.

Wire into weight construction and performance calc.

Acceptance criteria

Changing these params impacts turnover and P&L as expected; documented in help.

5) Scenario trays (2000–02, 2008–09, 2020Q1, 2022H1, rising‑rates)

Suggested labels: pipeline, exports, ui, enhancement, risk:low, priority: low, agent:copilot 
GitHub

Why
One dropdown to compare behavior across stress regimes is useful for non‑technical users.

Scope

Add scenario presets and date ranges to CLI and Streamlit.

Output side‑by‑side stats and a small chart grid to perf/.

Acceptance criteria

Users can select a scenario and see the report without editing code.

6) Attribution output (tidy DataFrame + report)

Suggested labels: exports, metrics, pipeline, enhancement, risk:low, priority: medium, agent:copilot 
GitHub

Why
manager_attribution_analysis.py should become a supported feature with consistent output. 
GitHub

Scope

Expose attribute(nav, weights, returns, groups=...) -> DataFrame.

Streamlit panel and CLI export (CSV + small HTML).

Acceptance criteria

A single function produces attribution; app and CLI share the same implementation.

7) Unified reporting: single JSON ledger + optional HTML

Suggested labels: exports, docs, pipeline, risk:low, priority: medium, agent:copilot 
GitHub

Why
Have one canonical “results blob” both the CLI and Streamlit can render.

Scope

report.py writes JSON with key stats, curves, turnover, and attribution; optional HTML powered by the same data.

portfolio_analysis_report.py becomes a thin wrapper. 
GitHub

Acceptance criteria

Both CLI and app emit the same numbers and charts; tests compare JSON against golden outputs.
