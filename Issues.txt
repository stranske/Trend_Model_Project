1. Centralize logging and stop committing logs
Labels: from:codex, agent:codex, devops, config, docs

Why
Committed logs (tmp_logs/, test_output.log) bloat history and confuse workflows.

Scope
- Single logging initializer that writes to perf/runs/<timestamp>/.
- Add log patterns to .gitignore.
- Remove existing logs from the repo if present.

Non-Goals
- Structured logging overhaul.

Tasks
- Create logging_setup.py; default level INFO with timestamped file handler and console handler.
- Replace ad-hoc logging init in scripts/apps with the centralized helper.
- Update .gitignore; delete tracked logs.
- Document where to find logs.

Acceptance criteria
- New runs write to perf/runs/<timestamp>/app.log.
- `git status` never shows new logs.
- All scripts use the central logging helper.


2. Move top-level demos and ad-hoc scripts into examples/ with a single runner
Labels: from:codex, agent:codex, docs, backend, enhancement

Why
Top-level files like demo_robust_weighting.py, demo_turnover_cap.py, debug_fund_selection.py, integration_example.py, portfolio_analysis_report.py clutter the root and duplicate logic.

Scope
- Relocate demo scripts into examples/ (or scripts/ if preferred).
- Prefer calling library functions over in-file logic.
- Provide one runner or README explaining each example.

Non-Goals
- Refactoring the analytical content.

Tasks
- Create examples/ directory and move the above demos.
- Replace any private imports with public API calls.
- Add examples/README.md listing each demo and how to run it.

Acceptance criteria
- Root is decluttered; examples run via the package install.
- No demo manipulates sys.path.
- A newcomer can run one example end-to-end using documented commands.


3. Pin Docker base, use multi-stage build, run as non-root
Labels: from:codex, agent:codex, devops, ci, dependencies, enhancement

Why
Pinned base + multi-stage cuts surprises and image bloat; running as non-root is basic hygiene.

Scope
- Pin the base image (e.g., python:3.12.2-slim).
- Multi-stage: builder for wheels, runtime for app.
- Create a non-root user in the runtime stage.

Non-Goals
- Container orchestration or deployment setup.

Tasks
- Rewrite Dockerfile accordingly; copy only needed artifacts into the final stage.
- Ensure `pip install -e .` happens in the builder stage.
- Verify docker-compose.yml still works.

Acceptance criteria
- `docker build` succeeds from a clean checkout.
- Final image shows a non-root default user.
- `pip freeze` in the container matches the lock file.


4. Time-aware universe membership (effective dates) and loader guardrails
Labels: from:codex, agent:codex, data, engine, testing, enhancement

Why
A static Trend Universe Data.csv risks survivorship bias. Add effective dating or at least enforce a column that can be used for time filtering.

Scope
- Introduce effective_date (and optional end_date) columns to the universe CSV, or keep a second CSV with dated membership.
- Update the loader to filter universe as-of each date.
- Add tests for adds/drops mid-sample.

Non-Goals
- Sourcing a full historical CRSP-style membership feed.

Tasks
- Modify the CSV and the loader accordingly.
- Add tests/test_universe_membership.py covering add/drop behavior.
- Document the convention next to the CSV.

Acceptance criteria
- Backtests respect membership changes over time.
- Tests confirm positions are dropped when a name exits the universe.
- Loader errors if effective_date is missing when required.


5. Calendar alignment utilities and policy (timezone, frequency, holidays)
Labels: from:codex, agent:codex, data, engine, testing, enhancement

Why
Mixed calendars and non-synchronous closes cause fake trades and phantoms in PnL.

Scope
- One utility that standardizes to a declared frequency and timezone (UTC) and applies a holiday calendar.
- Apply in ingestion or just before feature creation.

Non-Goals
- High-fidelity exchange calendars per asset; keep it simple.

Tasks
- Add a time_utils.py with align_calendar(df) and a simple holiday set.
- Use it in the pipeline.
- Tests that verify no weekend/holiday timestamps and consistent frequency.

Acceptance criteria
- After alignment, all series share the same set of timestamps.
- No weekend/holiday stamps remain.
- Tests fail if alignment is bypassed.


6. Parameter-stability plots and one-page HTML report
Labels: from:codex, agent:codex, exports, engine, enhancement, docs

Why
A simple 2D heatmap over two core parameters plus a compact report is the fastest sanity check for fragility.

Scope
- Generate a single HTML (or Markdown) report with config, key metrics, equity + drawdown, turnover, and a heatmap of performance across a small grid.

Non-Goals
- A full reporting framework.

Tasks
- Implement a small reporting module that reads run artifacts and writes perf/reports/<run-id>.html.
- Add a parameter-grid helper producing a 2-D heatmap image saved under perf/.

Acceptance criteria
- One command creates the summary report for a given run.
- The heatmap file exists and is referenced in the report.
- Report includes the config used to produce the run.


7. Clarify data status for committed CSVs (synthetic/public) with a short README next to them
Labels: from:codex, agent:codex, docs, data

Why
Committed CSVs like hedge_fund_returns_with_indexes.csv can be mistaken for proprietary data. A local README removes doubt.

Scope
- A short README_DATA.md placed beside the CSVs stating the data’s provenance (synthetic/public), intended use (demo/tests), and any limitations.

Non-Goals
- Data cleaning beyond the existing demos.

Tasks
- Write README_DATA.md with clear provenance and disclaimers.
- Link this README from README.md so users don’t miss it.

Acceptance criteria
- The README is present and visible from the main README.
- Language clearly states whether the data is public/synthetic and any restrictions.
