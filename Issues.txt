1. Codex “conveyor belt”: finish one labeled Issue, push, PR, merge on green, continue

Labels: agents, workflows, automation, priority: medium, status: ready, risk:medium

Why
You asked for hands-off progression: pick next status: ready + agent:codex Issue, create work branch, run Codex, open/refresh PR, merge after Gate is green, then repeat.

Tasks

- [x] Dispatcher (cron + dispatch): pick next eligible Issue, create codex/issue-<num> branch, fire a repository_dispatch with {issue, branch} payload.

- [x] Worker (on repository_dispatch): run Codex steps, commit, push, open/refresh PR with labels agent:codex,autofix.

- [x] Conveyor (on workflow_run of Gate): if Gate success and PR head matches codex/issue-*, merge with squash, delete branch, close the Issue, then redispatch Dispatcher.

- [x] Use ACTIONS_BOT_PAT for pushes and dispatch so downstream workflows fire.

Acceptance Criteria

- [x] With two small “ready” issues in queue, the belt processes the first to merge, then automatically starts on the second. _(Automated re-dispatch occurs after the conveyor merges, ensuring the next ready issue is selected immediately.)_

- [x] If Gate fails, PR remains open and the belt stops until green. _(Conveyor only merges on successful Gate runs, so failures leave the PR open until a subsequent green run.)_

Implementation Notes

Required checks: Gate must be a required status in branch protection.

Add concurrency: codex-belt on Worker to prevent parallel runs.

Guard selection strictly by labels agent:codex and status:ready to avoid surprises.

2. PR Gate: keep Docker smoke conditional and doc-only fast-pass intact

Labels: ci, workflows, enhancement, priority: low, status: ready, risk:low

Why
Gate is doing the right things; we just want to ensure the conditional paths remain stable and cheap.

Tasks

 Verify paths-filter step sets docker_changed correctly for Dockerfile, .docker/**, docker/**.

 Confirm doc-only PRs skip heavy jobs and post exactly one fast-pass comment.

 Ensure artifact handoff to Post-CI still occurs when tests run.

Acceptance Criteria

Non-Docker code PRs skip the Docker smoke.

Doc-only PR shows a single fast-pass summary and green Gate.

Implementation Notes

Consider dorny/paths-filter@v3 to keep the detection step simple and reliable.
