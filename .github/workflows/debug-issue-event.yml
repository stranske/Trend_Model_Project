name: Debug Issue Event
on:
  issues:
    types: [labeled, unlabeled, opened, reopened]

jobs:
  debug_dump:
    runs-on: ubuntu-latest
    steps:
      - name: Dump GitHub Context
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: echo "$GITHUB_CONTEXT"
      - name: Check Label Logic
        run: |
          echo "Event Name: ${{ github.event_name }}"
          echo "Action: ${{ github.event.action }}"
          echo "Label Name: '${{ github.event.label.name }}'"
          echo "Issue Labels: '${{ toJson(github.event.issue.labels.*.name) }}'"
          
          # Simulate the checks
          if [[ "${{ github.event.action }}" == "labeled" ]]; then
            if [[ "${{ github.event.label.name }}" == agent:* ]] || [[ "${{ github.event.label.name }}" == agents:* ]]; then
              echo "MATCH: Explicit label check passed"
            else
              echo "FAIL: Explicit label check failed"
            fi
          fi
          
          labels_json='${{ toJson(github.event.issue.labels.*.name) }}'
          if [[ "$labels_json" == *"agent:"* ]] || [[ "$labels_json" == *"agents:"* ]]; then
             echo "MATCH: Contains check passed"
          else
             echo "FAIL: Contains check failed"
          fi
