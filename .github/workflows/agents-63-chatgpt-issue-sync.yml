# See docs/ci/AGENTS_POLICY.md for guardrails and override process.
name: Agents 63 ChatGPT Issue Sync

on:
  workflow_dispatch:
    inputs:
      source:
        description: "Primary: path (in repo) to topics file (preferred for large lists)"
        required: false
        type: string
      raw_input:
        description: "Secondary: small pasted topic list (may truncate around 1KB)"
        required: false
        type: string
      source_url:
        description: "Fallback: raw text URL (raw.githubusercontent.com / Gist raw)"
        required: false
        type: string
      debug:
        description: Enable verbose debug diagnostics
        required: false
        type: boolean
        default: false

jobs:
  sync:
    name: Normalize ChatGPT topics into GitHub issues
    concurrency:
      # Queue overlapping runs on the same ref so a prior sync can finish cleanly.
      group: agent-sync-${{ github.ref }}
      cancel-in-progress: false
    uses: ./.github/workflows/agents-63-issue-intake.yml
    with:
      intake_mode: chatgpt_sync
      source: ${{ github.event.inputs.source }}
      raw_input: ${{ github.event.inputs.raw_input }}
      source_url: ${{ github.event.inputs.source_url }}
      debug: ${{ github.event.inputs.debug && 'true' || 'false' }}
