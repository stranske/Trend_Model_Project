[build-system]
# Pin build dependencies to ensure reproducible installs during Docker builds
requires = ["setuptools==69.5.1", "wheel==0.43.0"]
build-backend = "setuptools.build_meta"

[project]
name = "trend-model"
version = "0.1.0"
description = "Volatility-adjusted trend analysis package"
readme = "README.md"
requires-python = ">=3.11"
license = {text = "MIT"}
authors = [
    {name = "Trend Analysis Contributors"}
]
maintainers = [
    {name = "Trend Analysis Contributors"}
]
keywords = ["finance", "trend-analysis", "volatility", "portfolio", "analysis"]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Financial and Insurance Industry",
    "Topic :: Office/Business :: Financial :: Investment",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
]
dependencies = [
    "pandas",
    "numpy", 
    "PyYAML",
    "xlsxwriter",
    "openpyxl",
    "pydantic>=2",
    "hypothesis",
    "matplotlib",
    "ipywidgets",
    "scipy",
]

[project.urls]
Homepage = "https://github.com/stranske/Trend_Model_Project"
Repository = "https://github.com/stranske/Trend_Model_Project"
Issues = "https://github.com/stranske/Trend_Model_Project/issues"
Documentation = "https://github.com/stranske/Trend_Model_Project#readme"

[project.scripts]
trend-analysis = "trend_analysis.run_analysis:main"
trend-multi-analysis = "trend_analysis.run_multi_analysis:main"
trend-model = "trend_analysis.cli:main"

[tool.setuptools.packages.find]
where = ["src"]
include = ["trend_analysis*", "trend_portfolio_app*"]

[tool.setuptools.package-data]
"trend_analysis.export" = ["manifest_schema.json"]

[project.optional-dependencies]
app = [
    "streamlit>=1.30",
    "streamlit-sortables",
    "fastapi>=0.100.0",
    "uvicorn[standard]>=0.20.0",
]
notebooks = [
    "ipyfilechooser",
    "nbformat",
]
dev = [
    "pre-commit>=3.2.0",
    "black==24.8.0",
    "ruff==0.6.3", 
    "mypy>=1.0.0",
    "flake8",
    "pytest",
    "pytest-cov",
    "types-PyYAML",
    "jsonschema",
    "httpx>=0.25",
]

[tool.black]
extend-exclude = '''
/(
    Old
  | notebooks/old
  | .*\.ipynb
)/
'''

[tool.ruff]
extend-exclude = [
  "notebooks/old",
  "Old",
  "*.ipynb",
  "scripts",
  "manager_attribution_analysis.py",
  "portfolio_analysis_report.py",
  "debug_fund_selection.py",
  "test_multi_period_selection.py",
]

[tool.mypy]
python_version = "3.11"
strict = true
ignore_missing_imports = true
exclude = "^(Old/|notebooks/old/)"


[tool.pytest.ini_options]
markers = [
    "slow: marks tests as slow (deselect with '-m \"not slow\"')",
]
