version: 1
issue: 4447
base: main
branch: codex/issue-4447
tasks:
  - id: task-01
    title: Add `normalize_weights()` helper under `src/trend_analysis/util/weights.py`
      (accept dict/Series; detect percent vs fraction; return fractions; tolerance-aware).
    status: done
    started_at: '2026-01-20T08:13:17Z'
    finished_at: '2026-01-20T08:13:25Z'
    commit: 0920437eda3453961e29d2f55a79818285d0045c
    notes: []
  - id: task-02
    title: 'Define scope for: Define scope for: Add `normalize_weights()` helper under
      `src/trend_analysis/util/weights.py` (accept dict/Series (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-03
    title: 'Implement focused slice for: Define scope for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-04
    title: 'Validate focused slice for: Define scope for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-05
    title: 'Define scope for: Implement focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-06
    title: 'Implement focused slice for: Implement focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-07
    title: 'Validate focused slice for: Implement focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-08
    title: 'Define scope for: Validate focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-09
    title: 'Implement focused slice for: Validate focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-10
    title: 'Validate focused slice for: Validate focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-11
    title: 'detect percent vs fraction (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-12
    title: 'return fractions (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-13
    title: 'tolerance-aware). (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-14
    title: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals, not only exactly 100).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-15
    title: 'Define scope for: Define scope for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-16
    title: 'Implement focused slice for: Define scope for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-17
    title: 'Validate focused slice for: Define scope for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-18
    title: 'Define scope for: Implement focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-19
    title: 'Implement focused slice for: Implement focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-20
    title: 'Validate focused slice for: Implement focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-21
    title: 'Define scope for: Validate focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-22
    title: 'Implement focused slice for: Validate focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-23
    title: 'Validate focused slice for: Validate focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-24
    title: 'not only exactly 100). (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-25
    title: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping` to call
      `normalize_weights()` and remove local percent-guessing logic.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-26
    title: 'Define scope for: Define scope for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-27
    title: 'Implement focused slice for: Define scope for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-28
    title: 'Validate focused slice for: Define scope for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-29
    title: 'Define scope for: Implement focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-30
    title: 'Implement focused slice for: Implement focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-31
    title: 'Validate focused slice for: Implement focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-32
    title: 'Define scope for: Validate focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-33
    title: 'Implement focused slice for: Validate focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-34
    title: 'Validate focused slice for: Validate focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-35
    title: 'remove local percent-guessing logic. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-36
    title: Update `src/trend_analysis/api.py::_build_multi_period_portfolio` to normalize
      `fund_weights` / `ew_weights` before computing weighted returns.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-37
    title: 'Define scope for: Define scope for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-38
    title: 'Implement focused slice for: Define scope for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-39
    title: 'Validate focused slice for: Define scope for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-40
    title: 'Define scope for: Implement focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-41
    title: 'Implement focused slice for: Implement focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-42
    title: 'Validate focused slice for: Implement focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-43
    title: 'Define scope for: Validate focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-44
    title: 'Implement focused slice for: Validate focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-45
    title: 'Validate focused slice for: Validate focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-46
    title: '`ew_weights` before computing weighted returns. (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-47
    title: "Add unit tests for `normalize_weights()` covering: sum\u22481, sum\u2248\
      100, rounding error (99.999 / 100.001), empty/None, and long/short cases."
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-48
    title: "Add unit tests for `normalize_weights()` covering: sum\u22481 (verify:\
      \ tests pass)"
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-49
    title: "sum\u2248100 (verify: confirm completion in repo)"
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-50
    title: 'rounding error (99.999 (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-51
    title: '100.001) (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-52
    title: 'empty/None (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-53
    title: '(verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-54
    title: 'long/short cases. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-55
    title: Add/extend tests asserting output weight mappings (`fund_weights`, `ew_weights`,
      and any `weights_*` keys when present) are fractions and sum ~1 for long-only
      portfolios.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-56
    title: 'Add/extend tests asserting output weight mappings (`fund_weights` (verify:
      tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-57
    title: '`ew_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-58
    title: '(verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-59
    title: 'any `weights_*` keys when present) are fractions (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-60
    title: 'sum ~1 for long-only portfolios. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-61
    title: Add `normalize_weights()` helper under `src/trend_analysis/util/weights.py`
      (accept dict/Series; detect percent vs fraction; return fractions; tolerance-aware).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-62
    title: 'Define scope for: Define scope for: Add `normalize_weights()` helper under
      `src/trend_analysis/util/weights.py` (accept dict/Series (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-63
    title: 'Implement focused slice for: Define scope for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-64
    title: 'Validate focused slice for: Define scope for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-65
    title: 'Define scope for: Implement focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-66
    title: 'Implement focused slice for: Implement focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-67
    title: 'Validate focused slice for: Implement focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-68
    title: 'Define scope for: Validate focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-69
    title: 'Implement focused slice for: Validate focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-70
    title: 'Validate focused slice for: Validate focused slice for: Add `normalize_weights()`
      helper under `src/trend_analysis/util/weights.py` (accept dict/Series (verify:
      confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-71
    title: 'detect percent vs fraction (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-72
    title: 'return fractions (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-73
    title: 'tolerance-aware). (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-74
    title: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals, not only exactly 100).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-75
    title: 'Define scope for: Define scope for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-76
    title: 'Implement focused slice for: Define scope for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-77
    title: 'Validate focused slice for: Define scope for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-78
    title: 'Define scope for: Implement focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-79
    title: 'Implement focused slice for: Implement focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-80
    title: 'Validate focused slice for: Implement focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-81
    title: 'Define scope for: Validate focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-82
    title: 'Implement focused slice for: Validate focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-83
    title: 'Validate focused slice for: Validate focused slice for: Update `src/trend_analysis/multi_period/engine.py::_coerce_previous_weights`
      to use `normalize_weights()` (convert near-100 totals (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-84
    title: 'not only exactly 100). (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-85
    title: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping` to call
      `normalize_weights()` and remove local percent-guessing logic.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-86
    title: 'Define scope for: Define scope for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-87
    title: 'Implement focused slice for: Define scope for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-88
    title: 'Validate focused slice for: Define scope for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-89
    title: 'Define scope for: Implement focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-90
    title: 'Implement focused slice for: Implement focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-91
    title: 'Validate focused slice for: Implement focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-92
    title: 'Define scope for: Validate focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-93
    title: 'Implement focused slice for: Validate focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-94
    title: 'Validate focused slice for: Validate focused slice for: Update `streamlit_app/pages/3_Results.py::_coerce_weight_mapping`
      to call `normalize_weights()` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-95
    title: 'remove local percent-guessing logic. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-96
    title: Update `src/trend_analysis/api.py::_build_multi_period_portfolio` to normalize
      `fund_weights` / `ew_weights` before computing weighted returns.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-97
    title: 'Define scope for: Define scope for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-98
    title: 'Implement focused slice for: Define scope for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-99
    title: 'Validate focused slice for: Define scope for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-100
    title: 'Define scope for: Implement focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-101
    title: 'Implement focused slice for: Implement focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-102
    title: 'Validate focused slice for: Implement focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-103
    title: 'Define scope for: Validate focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-104
    title: 'Implement focused slice for: Validate focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-105
    title: 'Validate focused slice for: Validate focused slice for: Update `src/trend_analysis/api.py::_build_multi_period_portfolio`
      to normalize `fund_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-106
    title: '`ew_weights` before computing weighted returns. (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-107
    title: "Add unit tests for `normalize_weights()` covering: sum\u22481, sum\u2248\
      100, rounding error (99.999 / 100.001), empty/None, and long/short cases."
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-108
    title: "Add unit tests for `normalize_weights()` covering: sum\u22481 (verify:\
      \ tests pass)"
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-109
    title: "sum\u2248100 (verify: confirm completion in repo)"
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-110
    title: 'rounding error (99.999 (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-111
    title: '100.001) (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-112
    title: 'empty/None (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-113
    title: '(verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-114
    title: 'long/short cases. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-115
    title: Add/extend tests asserting output weight mappings (`fund_weights`, `ew_weights`,
      and any `weights_*` keys when present) are fractions and sum ~1 for long-only
      portfolios.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-116
    title: 'Add/extend tests asserting output weight mappings (`fund_weights` (verify:
      tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-117
    title: '`ew_weights` (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-118
    title: '(verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-119
    title: 'any `weights_*` keys when present) are fractions (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-120
    title: 'sum ~1 for long-only portfolios. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-121
    title: All production code paths treat weight mappings as fractions internally
      and in result payloads.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-122
    title: "Percent-style inputs (sum\u2248100) normalize deterministically to fractions\
      \ with unit tests proving behavior."
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-123
    title: Streamlit Results page no longer performs its own percent-to-fraction guessing.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-124
    title: All existing tests pass and the new normalization tests pass.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-125
    title: All production code paths treat weight mappings as fractions internally
      and in result payloads.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-126
    title: "Percent-style inputs (sum\u2248100) normalize deterministically to fractions\
      \ with unit tests proving behavior."
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-127
    title: Streamlit Results page no longer performs its own percent-to-fraction guessing.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-128
    title: All existing tests pass and the new normalization tests pass.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
