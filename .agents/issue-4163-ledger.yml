version: 1
issue: 4163
base: phase-3
branch: codex/issue-4163
tasks:
  - id: task-01
    title: Create `StrategyVariant` class in `src/trend_analysis/monte_carlo/strategy/variant.py`
      with attributes `name`, `overrides`, and `tags`.
    status: doing
    started_at: '2026-01-31T08:03:01Z'
    finished_at: null
    commit: ''
    notes: []
  - id: task-02
    title: Implement `apply_to` method in `StrategyVariant` to deep merge `overrides`
      into a base configuration.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-03
    title: Implement `to_trend_config` method in `StrategyVariant` to return a validated
      `TrendConfig` object.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-04
    title: Validate merged configurations and raise clear errors for invalid overrides
      in `to_trend_config`.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-05
    title: 'Write unit tests in `tests/monte_carlo/strategy/test_variant.py` for:'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-06
    title: Simple override application (e.g., single-level keys).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-07
    title: Nested override application (e.g., `portfolio.rank.n`).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-08
    title: Type mismatches in overrides.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-09
    title: Write unit tests in `tests/monte_carlo/strategy/test_variant.py` to validate
      behavior for invalid override paths, ensuring clear error messages are raised.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-10
    title: 'Define scope for: Write unit tests for invalid override paths with missing
      keys. (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-11
    title: 'Implement focused slice for: Write unit tests for invalid override paths
      with missing keys. (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-12
    title: 'Validate focused slice for: Write unit tests for invalid override paths
      with missing keys. (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-13
    title: 'Define scope for: Write unit tests for invalid override paths with incorrect
      data types. (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-14
    title: 'Implement focused slice for: Write unit tests for invalid override paths
      with incorrect data types. (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-15
    title: 'Validate focused slice for: Write unit tests for invalid override paths
      with incorrect data types. (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-16
    title: 'Define scope for: Write unit tests for invalid override paths with unsupported
      configurations. (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-17
    title: 'Implement focused slice for: Write unit tests for invalid override paths
      with unsupported configurations. (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-18
    title: 'Validate focused slice for: Write unit tests for invalid override paths
      with unsupported configurations. (verify: tests pass)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-19
    title: Implement `StrategyVariant` and deep-merge override application.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-20
    title: Validate merged configs and surface clear errors for invalid overrides.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-21
    title: Preserve tags and expose validated `TrendConfig` generation.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-22
    title: Add unit tests for override paths, nesting, and type mismatches.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-23
    title: Strategies can be defined in scenario YAML files.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-24
    title: Overrides are applied correctly via deep merge.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-25
    title: Resulting configuration is validated, and invalid overrides raise clear
      errors.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-26
    title: Tags are preserved and accessible for filtering.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-27
    title: 'Unit tests pass for:'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-28
    title: Simple overrides (single level).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-29
    title: Nested overrides (e.g., `portfolio.rank.n`).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-30
    title: Invalid override paths.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-31
    title: Override type mismatches.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-32
    title: Strategies can be defined in scenario YAML
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-33
    title: Overrides are applied correctly via deep merge
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-34
    title: Resulting config is validated (invalid overrides raise clear errors)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-35
    title: Tags are preserved for filtering
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-36
    title: 'Unit tests for:'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-37
    title: Simple overrides (single level)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-38
    title: Nested overrides (portfolio.rank.n)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-39
    title: Invalid override paths
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-40
    title: Override type mismatches
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-41
    title: '## Files to Create/Modify'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-42
    title: '`src/trend_analysis/monte_carlo/strategy/__init__.py`'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-43
    title: '`src/trend_analysis/monte_carlo/strategy/variant.py`'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-44
    title: '`tests/monte_carlo/strategy/test_variant.py`'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-45
    title: Strategies can be defined in scenario YAML files. (AGENT_LIMITATIONS prevent
      modifying `.github/workflows/*.yml` or repository settings, which may be required
      for YAML file integration. | Clarify whether YAML file integration requires
      changes to protected files or repository settings. If so, delegate this task
      to a human developer.)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-46
    title: Cannot guarantee specific coverage percentages. (The agent cannot ensure
      specific test coverage percentages due to limitations in CI pipeline control.
      | Remove or rephrase acceptance criteria related to test coverage percentages
      to focus on qualitative validation.)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
