version: 1
issue: 4169
base: phase-3
branch: codex/issue-4169
tasks:
  - id: task-01
    title: Add explicit cash weight handling in portfolio evaluation so weights sum
      to 1.0.
    status: done
    started_at: '2026-02-01T12:36:51Z'
    finished_at: '2026-02-01T12:36:59Z'
    commit: aef309d665a376b85e9e215d411d274b1c9a4563
    notes: []
  - id: task-02
    title: Implement risk-free source resolution (all supported modes) in `monte_carlo/config.py`.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-03
    title: Include cash weight series in outputs and ensure return formula includes
      cash.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-04
    title: Add tests for underinvestment, RF accrual, and return calculation.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-05
    title: Add explicit cash weight handling in portfolio evaluation so weights sum
      to 1.0.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-06
    title: Implement risk-free source resolution (all supported modes) in `monte_carlo/config.py`.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-07
    title: Include cash weight series in outputs and ensure return formula includes
      cash.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-08
    title: Add tests for underinvestment, RF accrual, and return calculation.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-09
    title: Portfolio weights always sum to 1.0 (including CASH).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-10
    title: Underinvestment scenarios produce correct cash weight.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-11
    title: Cash earns RF return correctly.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-12
    title: RF source is configurable (all three modes work).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-13
    title: Output includes cash weight per period.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-14
    title: Portfolio return = weighted sum including cash (verified in tests).
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-15
    title: Portfolio weights always sum to 1.0 (including CASH)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-16
    title: Underinvestment scenarios produce correct cash weight
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-17
    title: Cash earns RF return correctly
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-18
    title: RF source is configurable (all three modes work)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-19
    title: Output includes cash weight per period
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-20
    title: Portfolio return = weighted sum including cash (verified in tests)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-21
    title: '## Files to Create/Modify'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-22
    title: Modify portfolio evaluation in `runner.py` or `stages/portfolio.py`
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-23
    title: Add RF source resolution to `monte_carlo/config.py`
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-24
    title: '`tests/monte_carlo/test_cash_handling.py`'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
