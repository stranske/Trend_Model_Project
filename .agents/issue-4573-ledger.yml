version: 1
issue: 4573
base: phase-3
branch: codex/issue-4573
tasks:
  - id: task-01
    title: Implement the function `list_scenarios()` in the scenario registry module
      to read 'config/scenarios/monte_carlo/index.yml' and return a list of scenarios
      with their metadata, supporting optional filtering by tags.
    status: doing
    started_at: '2026-01-28T17:55:16Z'
    finished_at: null
    commit: ''
    notes: []
  - id: task-02
    title: Implement the function `get_scenario_path(name)` in the scenario registry
      module, which looks up a scenario by name from the index file and returns its
      file path.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-03
    title: Implement the function `load_scenario(name)` in the scenario registry module
      that uses `get_scenario_path()` to load the scenario file, validates that it
      conforms to the MonteCarloScenario schema, and provides clear error messaging
      if the scenario is missing or invalid.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-04
    title: 'Define scope for: Implement the function `load_scenario(name)` to load
      the scenario file using `get_scenario_path()`. (verify: confirm completion in
      repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-05
    title: 'Implement focused slice for: Implement the function `load_scenario(name)`
      to load the scenario file using `get_scenario_path()`. (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-06
    title: 'Validate focused slice for: Implement the function `load_scenario(name)`
      to load the scenario file using `get_scenario_path()`. (verify: confirm completion
      in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-07
    title: 'Define scope for: Validate the loaded scenario against the MonteCarloScenario
      schema. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-08
    title: 'Implement focused slice for: Validate the loaded scenario against the
      MonteCarloScenario schema. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-09
    title: 'Validate focused slice for: Validate the loaded scenario against the MonteCarloScenario
      schema. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-10
    title: 'Define scope for: Implement error handling for missing or invalid scenarios
      with clear messaging. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-11
    title: 'Implement focused slice for: Implement error handling for missing or invalid
      scenarios with clear messaging. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-12
    title: 'Validate focused slice for: Implement error handling for missing or invalid
      scenarios with clear messaging. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-13
    title: Update the YAML parsing logic to handle the new nested 'scenario:' block
      while ensuring backward compatibility with top-level keys if necessary.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-14
    title: 'Define scope for: Update the YAML parsing logic to handle the new nested
      ''scenario:'' block. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-15
    title: 'Implement focused slice for: Update the YAML parsing logic to handle the
      new nested ''scenario:'' block. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-16
    title: 'Validate focused slice for: Update the YAML parsing logic to handle the
      new nested ''scenario:'' block. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-17
    title: 'Define scope for: Ensure backward compatibility with top-level keys in
      the YAML parsing logic. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-18
    title: 'Implement focused slice for: Ensure backward compatibility with top-level
      keys in the YAML parsing logic. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-19
    title: 'Validate focused slice for: Ensure backward compatibility with top-level
      keys in the YAML parsing logic. (verify: confirm completion in repo)'
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-20
    title: Add unit tests in `tests/monte_carlo/test_registry.py` that cover `list_scenarios()`,
      `load_scenario()`, and `get_scenario_path()`, including cases with valid inputs,
      tag filtering, and error cases for missing or invalid scenario files.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-21
    title: The `list_scenarios()` function returns a list of all scenario names and
      their metadata from 'config/scenarios/monte_carlo/index.yml'.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-22
    title: The `list_scenarios()` function correctly filters scenarios by tags when
      provided with a tag filter.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-23
    title: The `get_scenario_path(name)` function returns the correct file path for
      a given scenario name from 'config/scenarios/monte_carlo/index.yml'.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-24
    title: The `load_scenario(name)` function returns a validated `MonteCarloScenario`
      object for a valid scenario name.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-25
    title: The `load_scenario(name)` function raises a clear, descriptive error if
      the scenario is missing or invalid.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-26
    title: The YAML parsing logic correctly handles the new nested 'scenario:' block
      while maintaining backward compatibility with top-level keys.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-27
    title: All unit tests in `tests/monte_carlo/test_registry.py` pass, covering valid
      inputs, tag filtering, and error cases for missing or invalid scenario files.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-28
    title: Implement the function `list_scenarios()` in the scenario registry module
      to read 'config/scenarios/monte_carlo/index.yml' and return a list of scenarios
      with their metadata, supporting optional filtering by tags.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-29
    title: Implement the function `get_scenario_path(name)` in the scenario registry
      module, which looks up a scenario by name from the index file and returns its
      file path.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-30
    title: Implement the function `load_scenario(name)` in the scenario registry module
      that uses `get_scenario_path()` to load the scenario file, validates that it
      conforms to the MonteCarloScenario schema, and provides clear error messaging
      if the scenario is missing or invalid.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-31
    title: Update the YAML parsing logic to handle the new nested 'scenario:' block
      while ensuring backward compatibility with top-level keys if necessary.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-32
    title: Add unit tests in `tests/monte_carlo/test_registry.py` that cover `list_scenarios()`,
      `load_scenario()`, and `get_scenario_path()`, including cases with valid inputs,
      tag filtering, and error cases for missing or invalid scenario files.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-33
    title: The `list_scenarios()` function returns a list of all scenario names and
      their metadata from 'config/scenarios/monte_carlo/index.yml'.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-34
    title: The `list_scenarios()` function correctly filters scenarios by tags when
      provided with a tag filter.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-35
    title: The `get_scenario_path(name)` function returns the correct file path for
      a given scenario name from 'config/scenarios/monte_carlo/index.yml'.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-36
    title: The `load_scenario(name)` function returns a validated `MonteCarloScenario`
      object for a valid scenario name.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-37
    title: The `load_scenario(name)` function raises a clear, descriptive error if
      the scenario is missing or invalid.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-38
    title: The YAML parsing logic correctly handles the new nested 'scenario:' block
      while maintaining backward compatibility with top-level keys.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-39
    title: All unit tests in `tests/monte_carlo/test_registry.py` pass, covering valid
      inputs, tag filtering, and error cases for missing or invalid scenario files.
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
  - id: task-40
    title: Add unit tests in `tests/monte_carlo/test_registry.py` that cover `list_scenarios()`,
      `load_scenario()`, and `get_scenario_path()`, including cases with valid inputs,
      tag filtering, and error cases for missing or invalid scenario files. (AGENT_LIMITATIONS
      prevent the agent from guaranteeing specific coverage percentages or creating
      new test files. | Provide detailed test case descriptions and delegate test
      implementation to a developer.)
    status: todo
    started_at: null
    finished_at: null
    commit: ''
    notes: []
